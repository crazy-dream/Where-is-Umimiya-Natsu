<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>çŒœçŒœå°ä¸‘åœ¨å“ªè£¡</title>

<style>
:root{
Â  --bg:#bfe8ff;
Â  --door:#3aa0ff;
Â  --accent:#ff4b6e;
Â  --text:#002d59;
Â  --red:#ff3b3b;
Â  --win:#1E90FF;
}
html,body{height:100%; margin:0; font-family:"Microsoft JhengHei",sans-serif; background:var(--bg);}

/* ======== æ•…äº‹æ’­æ”¾ï¼ˆå…¨è¢å¹• coverï¼‰ ======== */
#storyPlayer{
Â  position:fixed;
Â  inset:0;
Â  background:black;
Â  display:flex;
Â  justify-content:center;
Â  align-items:center;
Â  z-index:99999;
Â  flex-direction:column;
}

#storyImg{
Â  width:100%;
Â  height:100%;
Â  object-fit:cover;
Â  background:black;
}

#storyHint{
Â  position:absolute;
Â  right:20px;
Â  top:50%;
Â  transform:translateY(-50%);
Â  writing-mode:vertical-rl;
Â  font-size:28px;
Â  letter-spacing:4px;
Â  opacity:0.8;
}

/* ======== éŠæˆ² ======== */
.game-wrap{min-height:100vh; display:flex; flex-direction:column; align-items:center; padding:28px; gap:18px;}
header{width:100%; display:flex; justify-content:center; position:relative;}
h1{margin:0;font-size:28px;}
.level-badge{position:absolute; left:18px; top:0; padding:6px 10px; border-radius:10px;
Â  font-weight:700; background:rgba(255,255,255,0.25); backdrop-filter: blur(4px);}

.lives{position:absolute; right:18px; top:0; display:flex; gap:8px;}
.life{width:18px; height:18px; border-radius:50%; background:var(--red);}
.life.empty{background:#eee; border:1px solid #aaa;}

.stage{display:flex; gap:32px; justify-content:center; margin-top:20px;}

.door-card{
Â  width:540px; height:420px; background:var(--door);
Â  border-radius:16px; position:relative; overflow:hidden; cursor:pointer;
Â  transition:0.2s;
}
@keyframes shake {
Â  0%{ transform:translateX(0);}
Â  20%{ transform:translateX(-12px);}
Â  40%{ transform:translateX(12px);}
Â  60%{ transform:translateX(-8px);}
Â  80%{ transform:translateX(8px);}
Â  100%{ transform:translateX(0);}
}
.shake{ animation:shake 0.4s ease; }

.reveal-area{position:absolute; inset:0; z-index:1; display:flex; justify-content:center; align-items:center;}
.reveal-img{max-width:100%; max-height:100%; object-fit:cover;}

.panel{position:absolute; z-index:10; width:50%; top:0; bottom:0; display:flex;
Â  justify-content:center; align-items:center; font-size:60px; font-weight:900;
Â  background:var(--door); transition:0.75s;}
.panel.left{ left:0; }
.panel.right{ right:0; }
.door-card.open .panel.left{ transform:translateX(-100%); }
.door-card.open .panel.right{ transform:translateX(100%); }

.pop-clown{
Â  position:fixed;
Â  left:50%; top:50%;
Â  transform:translate(-50%,-50%) scale(0.1);
Â  font-size:40px;
Â  opacity:0.2;
Â  z-index:9999;
Â  animation:pop 0.9s ease-out forwards;
}
@keyframes pop {
Â  0% { transform:translate(-50%,-50%) scale(0.1); opacity:0; }
Â  40%{ transform:translate(-50%,-50%) scale(3.0); opacity:0.7; }
Â  100%{ transform:translate(-50%,-50%) scale(4.0); opacity:0; }
}

.overlay{position:fixed; inset:0; display:flex; justify-content:center;
Â  align-items:center; background:rgba(0,0,0,0); pointer-events:none;
Â  z-index:999; transition:0.3s;}
.overlay-message{opacity:0; font-size:70px; font-weight:900; color:red; transition:0.3s;}
.overlay.show{background:rgba(0,0,0,0.65); pointer-events:auto;}
.overlay.show .overlay-message{opacity:1;}
</style>
</head>

<body>

<div id="storyPlayer">
Â  <img id="storyImg">
Â  <div id="storyHint">é»æ“Šä»»æ„åœ°æ–¹ç¹¼çºŒ</div>
</div>

<div class="game-wrap" id="gameArea" style="display:none;">
Â  <header>
Â  Â  <div class="level-badge" id="levelBadge">ç¬¬1é—œ</div>
Â  Â  <h1>çŒœçŒœå°ä¸‘åœ¨å“ªè£¡</h1>
Â  Â  <div class="lives">
Â  Â  Â  <div class="life" id="life1"></div>
Â  Â  Â  <div class="life" id="life2"></div>
Â  Â  Â  <div class="life" id="life3"></div>
Â  Â  </div>
Â  </header>

Â  <div class="stage">
Â  Â  <div class="door-card" id="doorA">
Â  Â  Â  <div class="reveal-area"><img id="imgA" class="reveal-img"></div>
Â  Â  Â  <div class="panel left">ğŸ¤¡</div>
Â  Â  Â  <div class="panel right">ğŸ¤¡</div>
Â  Â  </div>
Â  Â  <div class="door-card" id="doorB">
Â  Â  Â  <div class="reveal-area"><img id="imgB" class="reveal-img"></div>
Â  Â  Â  <div class="panel left">ğŸ¤¡</div>
Â  Â  Â  <div class="panel right">ğŸ¤¡</div>
Â  Â  </div>
Â  </div>
</div>

<div class="overlay" id="overlay">
Â  <div class="overlay-message" id="overlayMsg">GAME OVER</div>
</div>

<script>
/* ============================================================
Â  Â æ•…äº‹æ’­æ”¾ç³»çµ±ï¼ˆå·²ä¿®æ­£æ´‹èŠ‹ç‰‡6é»‘å­—ã€æ´‹èŠ‹ç‰‡9ç™½å­—é‚è¼¯ï¼‰
Â  Â ============================================================ */

const introStory = [
Â  "story/æ´‹èŠ‹ç‰‡1.jpg",
Â  "story/æ´‹èŠ‹ç‰‡2.jpg",
Â  "story/æ´‹èŠ‹ç‰‡3.jpg",
Â  "story/æ´‹èŠ‹ç‰‡4.jpg",
Â  "story/æ´‹èŠ‹ç‰‡5.jpg",
Â  "story/æ´‹èŠ‹ç‰‡6.jpg"
];

const gameOverStory = [
Â  "story/æ´‹èŠ‹ç‰‡7.jpg",
Â  "story/æ´‹èŠ‹ç‰‡8.jpg",
Â  "story/æ´‹èŠ‹ç‰‡9.jpg"
];

const winStory = [
Â  "story/æ´‹èŠ‹ç‰‡8.jpg",
Â  "story/æ´‹èŠ‹ç‰‡9.jpg"
];

let storyIndex = 0;
let currentStory = introStory;
let storyMode = "intro";

const storyPlayer = document.getElementById("storyPlayer");
const storyImg = document.getElementById("storyImg");
const storyHint = document.getElementById("storyHint");

/* é¡¯ç¤ºæ•…äº‹ */
function playStory(list, mode){
Â  currentStory = list;
Â  storyMode = mode;
Â  storyIndex = 0;

Â  storyImg.src = currentStory[0];

Â  // é€™è£¡ä¿æŒé è¨­ç‚ºé»‘è‰²ã€Œç¹¼çºŒã€ï¼Œå› ç‚ºç¬¬ä¸€å¼µåœ–é€šå¸¸ä¸æ˜¯ç™½è‰²èƒŒæ™¯
Â  storyHint.textContent = "é»æ“Šä»»æ„åœ°æ–¹ç¹¼çºŒ";
Â  storyHint.style.color = "black";

Â  // ç‰¹æ®Šè™•ç†ï¼šå¦‚æœæ˜¯ win æˆ– gameoverï¼Œä¸”åªæœ‰ä¸€å¼µåœ–ï¼ˆä¾‹å¦‚æ´‹èŠ‹ç‰‡9ï¼‰ï¼Œé€™è£¡å°±æ‡‰è©²è®Šç™½è‰²
Â  if(storyMode !== "intro" && currentStory.length === 1){
Â  Â  storyHint.textContent = "é»æ“Šè¢å¹•ä»»æ„åœ°æ–¹å†ä¸€æ¬¡";
Â  Â  storyHint.style.color = "white";
Â  }

Â  storyPlayer.style.display = "flex";
}

/* é»æ“Šåˆ‡æ› */
storyPlayer.onclick = ()=>{
Â  storyIndex++;

Â  if(storyIndex >= currentStory.length){
Â  Â  if(storyMode === "intro"){
Â  Â  Â  storyPlayer.style.display="none";
Â  Â  Â  document.getElementById("gameArea").style.display="flex";
Â  Â  } else {
Â  Â  Â  location.reload();
Â  Â  }
Â  Â  return;
Â  }

Â  storyImg.src = currentStory[storyIndex];

Â  // é è¨­å°‡æç¤ºæ–‡å­—è¨­ç‚ºé»‘è‰²ã€Œç¹¼çºŒã€ï¼ˆé©ç”¨æ–¼æ´‹èŠ‹ç‰‡6ï¼‰
Â  storyHint.textContent = "é»æ“Šä»»æ„åœ°æ–¹ç¹¼çºŒ";
Â  storyHint.style.color = "black";

Â  // åªæœ‰ç•¶ä¸æ˜¯ intro æ¨¡å¼ï¼Œä¸”æ˜¯åˆ—è¡¨ä¸­çš„æœ€å¾Œä¸€å¼µåœ–æ™‚ï¼Œæ‰åˆ‡æ›ç‚ºç™½è‰²ã€Œå†ä¸€æ¬¡ã€ï¼ˆé©ç”¨æ–¼æ´‹èŠ‹ç‰‡9ï¼‰
Â  if(storyMode !== "intro" && storyIndex === currentStory.length - 1){
Â  Â  storyHint.textContent = "é»æ“Šè¢å¹•ä»»æ„åœ°æ–¹å†ä¸€æ¬¡";
Â  Â  storyHint.style.color = "white";
Â  }
};

/* é–‹å ´æ’­æ”¾ */
playStory(introStory, "intro");


/* ============================================================
Â  Â éŠæˆ²æœ¬é«”ï¼ˆæœªæ›´å‹•ï¼‰
Â  Â ============================================================ */

let level=1,lives=3,jokerSide="A",lock=false;

const JOKER_IMAGES=[
Â  "joker/1.png","joker/1000018658.jpeg","joker/1000018659.jpeg","joker/2.png",
Â  "joker/3.png","joker/4 (2).png","joker/4.png","joker/5.png",
Â  "joker/546175134_1138063744950693_180659281319095751_n.jpg",
Â  "joker/Am I (1).jpg","joker/Am I (2).jpg","joker/Am I (3).jpg","joker/Am I (4).jpg",
Â  "joker/Am I.jpg","joker/I am joker. (1).jpg","joker/I am joker. (2).jpg",
Â  "joker/I am joker. (3).jpg","joker/I am joker. çš„è¤‡æœ¬ (1).jpg",
Â  "joker/I am joker..jpg","joker/I am joker..png",
Â  "joker/IMG_20250806_193336_118.jpg","joker/IMG_20251001_224237_440-removebg-preview.png",
Â  "joker/IMG_20251118_213550_407.jpg",
Â  "joker/unnamed (1).webp","joker/unnamed (2).webp","joker/unnamed (4).webp","joker/unnamed.webp",
Â  "joker/æœªå‘½åè¨­è¨ˆ.jpg","joker/æœªå‘½åè¨­è¨ˆ.png",
Â  "joker/è¢å¹•æ“·å–ç•«é¢ 2025-11-20 231537.png",
Â  "joker/è¢å¹•æ“·å–ç•«é¢ 2025-11-20 231953.png","joker/è¢å¹•æ“·å–ç•«é¢ 2025-11-20 232248.png",
Â  "joker/è¢å¹•æ“·å–ç•«é¢ 2025-11-20 232410.png","joker/è¢å¹•æ“·å–ç•«é¢ 2025-11-20 232433.png",
Â  "joker/è¢å¹•æ“·å–ç•«é¢ 2025-11-20 232449.png","joker/è¢å¹•æ“·å–ç•«é¢ 2025-11-20 233008.png"
];
const FILLER_IMAGES=["wrong/Ri86b7h.jpg"];

const doorA=document.getElementById("doorA");
const doorB=document.getElementById("doorB");
const imgA=document.getElementById("imgA");
const imgB=document.getElementById("imgB");
const overlay=document.getElementById("overlay");
const overlayMsg=document.getElementById("overlayMsg");

function updateLives(){
Â  for(let i=1;i<=3;i++){
Â  Â  const el=document.getElementById("life"+i);
Â  Â  if(i<=lives) el.classList.remove("empty");
Â  Â  else el.classList.add("empty");
Â  }
}

function preloadImage(src){
Â  return new Promise(resolve=>{
Â  Â  const img=new Image();
Â  Â  img.onload=()=>resolve(src);
Â  Â  img.src=src;
Â  });
}

let nextImages={A:'',B:''};
async function setRandomImages(){
Â  jokerSide=Math.random()<0.5?"A":"B";
Â  const jokerImg=JOKER_IMAGES[Math.floor(Math.random()*JOKER_IMAGES.length)];
Â  const fillerImg=FILLER_IMAGES[0];

Â  if(jokerSide==="A"){ nextImages={A:jokerImg,B:fillerImg}; }
Â  else{ nextImages={A:fillerImg,B:jokerImg}; }

Â  await Promise.all([preloadImage(nextImages.A),preloadImage(nextImages.B)]);
Â  imgA.src=nextImages.A;
Â  imgB.src=nextImages.B;
}

function playCorrectEffect(){
Â  const pop=document.createElement("div");
Â  pop.className="pop-clown";
Â  pop.textContent="ğŸ¤¡";
Â  document.body.appendChild(pop);
Â  setTimeout(()=>pop.remove(),900);
}

function playWrongEffect(door){
Â  door.classList.add("shake");
Â  setTimeout(()=>door.classList.remove("shake"),400);
}

function showGameOver(){
Â  overlay.classList.add("show");
Â  overlayMsg.textContent="GAME OVER";
Â  overlayMsg.style.color="red";

Â  setTimeout(()=>{
Â  Â  playStory(gameOverStory,"gameover");
Â  },1200);
}

function showWin(){
Â  overlay.classList.add("show");
Â  overlayMsg.textContent="WIN";
Â  overlayMsg.style.color="var(--win)";

Â  setTimeout(()=>{
Â  Â  playStory(winStory,"win");
Â  },1200);
}

function clickDoor(side){
Â  if(lock) return;
Â  lock=true;

Â  const door=side==="A"?doorA:doorB;
Â  const correct=(side===jokerSide);

Â  door.classList.add("open");

Â  if(correct){
Â  Â  playCorrectEffect();
Â  }else{
Â  Â  playWrongEffect(door);
Â  }

Â  setTimeout(()=>{
Â  Â  door.classList.remove("open");

Â  Â  setTimeout(async()=>{
Â  Â  Â  if(!correct){
Â  Â  Â  Â  lives--;
Â  Â  Â  Â  updateLives();
Â  Â  Â  Â  if(lives<=0){ showGameOver(); return; }
Â  Â  Â  }

Â  Â  Â  level++;
Â  Â  Â  if(level>6){ showWin(); return; }

Â  Â  Â  document.getElementById("levelBadge").textContent=`ç¬¬${level}é—œ`;
Â  Â  Â  await setRandomImages();
Â  Â  Â  lock=false;
Â  Â  },750);

Â  },800);
}

doorA.onclick=()=>clickDoor("A");
doorB.onclick=()=>clickDoor("B");

updateLives();
setRandomImages();
</script>

</body>
</html>
