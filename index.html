<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>猜猜小丑在哪裡</title>

<style>
:root{
  --bg:#bfe8ff;
  --door:#3aa0ff;
  --accent:#ff4b6e;
  --text:#002d59;
  --red:#ff3b3b;
  --win:#1E90FF;
}

/* 基本重置：禁止捲軸（關鍵） */
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden;                 /* ← 關鍵：整頁不會出現捲軸 */
  font-family: "Microsoft JhengHei", sans-serif;
  background: var(--bg);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  box-sizing: border-box;
}

/* ======== 故事播放（全螢幕 cover） ======== */
#storyPlayer{
  position:fixed;
  inset:0;
  background:black;
  display:flex;
  justify-content:center;
  align-items:center;
  z-index:99999;
  flex-direction:column;
  touch-action: manipulation;        /* 手機上避免雙重滾動手勢 */
}

#storyImg{
  width:100%;
  height:100%;
  object-fit:cover;   /* 確保圖片 cover 全螢幕且不變形 */
  background:black;
}

#storyHint{
  position:absolute;
  right:20px;
  top:50%;
  transform:translateY(-50%);
  writing-mode:vertical-rl;
  font-size:28px;
  letter-spacing:4px;
  opacity:0.85;
  pointer-events:none;
  -webkit-user-select:none;
  user-select:none;
}

/* ======== 遊戲區塊 ======== */
/* game-wrap 改為固定 height 並 box-sizing 以避免 padding 撐出畫面 */
.game-wrap{
  height:100vh;                  /* 固定高度避免超出 */
  box-sizing:border-box;         /* padding 不會撐出視窗 */
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:20px;                  /* 比較保守的 padding，避免 overflow */
  gap:12px;
}

/* header 以及徽章、生命值 */
header{width:100%; display:flex; justify-content:center; position:relative; align-items:center;}
h1{margin:0;font-size:28px;}
.level-badge{position:absolute; left:18px; top:8px; padding:6px 10px; border-radius:10px;
  font-weight:700; background:rgba(255,255,255,0.25); backdrop-filter: blur(4px);}
.lives{position:absolute; right:18px; top:8px; display:flex; gap:8px;}
.life{width:18px; height:18px; border-radius:50%; background:var(--red);}
.life.empty{background:#eee; border:1px solid #aaa;}

/* 舞台：使用彈性布局並允許換行 (mobile friendly) */
.stage{display:flex; gap:24px; justify-content:center; margin-top:10px; flex-wrap:wrap; align-items:center;}

/* 門卡尺寸改為相對 self-adaptive，且 max 限制 */
.door-card{
  width: min(45vw, 540px);     /* 自適應寬度 */
  height: min(35vw, 420px);    /* 自適應高度 */
  background:var(--door);
  border-radius:16px;
  position:relative;
  overflow:hidden;
  cursor:pointer;
  transition: transform 0.18s ease;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* 點錯時晃動 */
@keyframes shake {
  0%{ transform:translateX(0);}
  20%{ transform:translateX(-12px);}
  40%{ transform:translateX(12px);}
  60%{ transform:translateX(-8px);}
  80%{ transform:translateX(8px);}
  100%{ transform:translateX(0);}
}
.shake{ animation:shake 0.4s ease; }

/* 圖片顯示區 */
.reveal-area{position:absolute; inset:0; z-index:1; display:flex; justify-content:center; align-items:center;}
.reveal-img{max-width:100%; max-height:100%; object-fit:cover;}

/* 門板 */
.panel{position:absolute; z-index:10; width:50%; top:0; bottom:0; display:flex;
  justify-content:center; align-items:center; font-size:clamp(36px, 4.5vw, 60px); font-weight:900;
  background:var(--door); transition: transform 0.75s ease;}
.panel.left{ left:0; }
.panel.right{ right:0; }
.door-card.open .panel.left{ transform:translateX(-100%); }
.door-card.open .panel.right{ transform:translateX(100%); }

/* 彈出小丑效果 */
.pop-clown{
  position:fixed;
  left:50%; top:50%;
  transform:translate(-50%,-50%) scale(0.1);
  font-size:40px;
  opacity:0.2;
  z-index:9999;
  animation:pop 0.9s ease-out forwards;
}
@keyframes pop {
  0% { transform:translate(-50%,-50%) scale(0.1); opacity:0; }
  40%{ transform:translate(-50%,-50%) scale(3.0); opacity:0.7; }
  100%{ transform:translate(-50%,-50%) scale(4.0); opacity:0; }
}

/* 遮罩訊息（Game Over / Win） */
.overlay{position:fixed; inset:0; display:flex; justify-content:center;
  align-items:center; background:rgba(0,0,0,0); pointer-events:none;
  z-index:999; transition:0.3s;}
.overlay-message{opacity:0; font-size:70px; font-weight:900; color:red; transition:0.3s;}
.overlay.show{background:rgba(0,0,0,0.65); pointer-events:auto;}
.overlay.show .overlay-message{opacity:1;}

/* 手機微調：hint 位置更靠下以免遮到內容 */
@media (max-width:600px){
  #storyHint{ right:12px; font-size:22px; }
  .level-badge{left:8px; top:6px; padding:4px 8px;}
  .lives{right:8px; top:6px;}
  .panel{font-size:36px;}
  .game-wrap{padding:12px; gap:8px;}
}
</style>
</head>
